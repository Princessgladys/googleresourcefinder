{% comment %}
# Copyright 2009-2010 by Ka-Ping Yee
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
{% endcomment %}

{% include "header.html" %}
{% load i18n %}

<table class="settings">
  <tr>
    <td colspan="6" class="settings-title">
      {% comment %}
      #i18n: Settings page title
      {% endcomment %}
      {% trans "Settings" %}
    </td>
  </tr>
  <tr class="email-type">
    <td colspan="6">
      {% comment %}
      #i18n: Label for e-mail type radio buttons
      {% endcomment %}
      {% trans "E-mail Format:" %}
      {% comment %}
      #i18n: Label for "plain text" radio button
      {% endcomment %}
      {% trans "Plain Text" %}
      <input type="radio" name="email-type" value="plain"
        onClick="change_email_format('{{subdomain}}', 'plain');"
        {% ifequal user_email_format 'plain' %} checked{% endifequal %}>
        HTML<input type="radio" name="email-type" value="html"
        onClick="change_email_format('{{subdomain}}', 'html');"
        {% ifequal user_email_format 'html' %} checked{% endifequal %}>
    </td>
  </tr>
  <tr class="locale">
    <td colspan="6">
      {% comment %}
      #i18n: Label for a language selector
      {% endcomment %}
      {% trans "E-mail Language:" %}
      <select name="locale" onChange="change_locale('{{subdomain}}', this);">
      {% for lang in params.languages %}
        <option value="{{lang.0}}"
          {% ifequal lang.0 locale %} selected{% endifequal %}>
          {{lang.1}}</option>
      {% endfor %}
      </select>
    </td>
  </tr>
  <tr>
    <td colspan="6" class="settings-change-default">
      {% comment %}
      #i18n: Label for change default frequency box
      {% endcomment %}
      {% trans "Default Frequency:" %}
      <select name="default-frequency"
        onChange="change_default_frequency('{{subdomain}}', this)">
        {% for frequency in frequencies %}
        <option value="{{frequency.en}}"
          {% ifequal user_frequency frequency.en %}selected{% endifequal %}>
          {{frequency.trans}}
        </option>
        {% endfor %}
      </select>
    </td>
  </tr>
  {% if subjects %}
  <tr>
    <td class="settings-label-checkbox">
      <center><input type="checkbox" name="subjects-check-all"
        onClick="check_uncheck_all();"></center>
    </td>
    <td class="settings-label-subjectname">
      {% comment %}
      #i18n: label for facility name
      {% endcomment %}
      {% trans "Facility" %}
    </td>
    {% for frequency in frequencies %}
      <td class="settings-label-frequency">
        <center>{{frequency.trans}}</center>
      </td>
    {% endfor %}
  </tr>
  {% else %}
  <tr>
    <td colspan="6" class="settings-no-facilities">
      {% comment %}
      #i18n: message saying no facilities are subscribed to
      {% endcomment %}
      {% trans "No facilities to display." %}
    </td>
  </tr>
  {% endif %}
  {% for subject in subjects %}
  <tr id="{{subject.name}}" class="{% if forloop.counter|divisibleby:2 %}even"
    "{% else %}odd{% endif %}">
    <td class="subject-checkbox">
      <center><input type="checkbox" name="subject-checkboxes"
        value="{{subject.name}}" onClick="check_checkboxes();"></center>
    </td>
    <td class="subject-name">
      {{subject.title}}
    </td>
    {% for frequency in frequencies %}
    <td>
      <center><input type="radio" name="{{subject.name}}"
          {% ifequal frequency.en subject.frequency %}class="{{frequency.en}}"
          {% endifequal %}
          value="{{frequency.en}}" onClick="change_frequency('{{subdomain}}',
          '{{subject.name}}', '{{subject.frequency}}', '{{frequency.en}}');"
          {% ifequal frequency.en subject.frequency %}checked{% endifequal %}></center>
      </td>
    {% endfor %}
  </tr>
  {% endfor %}
  {% if subjects %}
  <tr>
    <td></td>
    <td>
      <button onClick="set_checked_to_default('{{subdomain}}',
        '{{user_frequency}}');">Set Checked to Default</button>
      <button onClick="unsubscribe_checked('{{subdomain}}')">
        Unsubscribe from Checked</button>
    </td>
  </tr>
  {% endif %}
</table>

</body>
</html>
