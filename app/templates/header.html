{% comment %}
# Copyright 2009-2010 by Ka-Ping Yee
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
{% endcomment %}

{% load i18n %}

<!-- No doctype: need quirks mode to get scrollbars in IE. -->
<html>
<head>
  {% comment %}
  #i18n: Name of the application.
  {% endcomment %}
  <title>{% trans "Resource Finder" %} ({{subdomain}})</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <!-- Stylesheets -->
  <link rel="stylesheet" href="static/map.css">
  {% if params.print %}
    <link rel="stylesheet" href="static/map-print.css">
  {% else %}{% if settings %}
    <link rel="stylesheet" href="static/settings.css">
  {% endif %}{% endif %}
  <!--[if lt IE 8]>
    <link rel="stylesheet" href="static/map-ie.css">
  <![endif]-->
  <link rel="stylesheet" type="text/css" media="all"
        href="static/css/custom-theme/jquery-ui-1.8rc3.custom.css" > 
  <link rel="stylesheet" href="static/bubble.css">
  
  {% if not settings %}
  <!-- Google Maps API -->
  <script type="text/javascript"
      src="http://maps.google.com/maps/api/js?sensor=false&language={{params.maps_lang}}">
  </script>
  <script type="text/javascript"
      src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer_compiled.js">
  </script>
  {% endif %}
  
  <!-- jQuery files -->
  <script type="text/javascript" src="static/jquery.min.js"></script>
  <script type="text/javascript">jQuery.noConflict();</script>
  <script type="text/javascript" src="static/jquery-ui-1.8rc3.custom.min.js">
  </script>

  <!-- Initialize the rf namespace -->
  <script type="text/javascript">
    rf = {};
  </script>
  <script type="text/javascript" src="static/templates.js"></script>
  {% ifequal 'en' params.lang %}
    <script type="text/javascript" src="static/locale.js"></script>
  {% else %}
    <script type="text/javascript" src="static/locale_{{params.lang}}.js"></script>
  {% endifequal %}
  {% if settings %}
  <script type="text/javascript" src="static/settings.js"></script>
  {% else %} 
  <script type="text/javascript" src="static/map.js"></script>
  <script type="text/javascript">
    var print = {% if params.print %} true {% else %} false {% endif %};
    var print_url = '{{print_url}}';
    var bubble_url = '{{bubble_url}}';
  </script>
  {% endif %}
{% include "analytics.html" %}
</head>

<body>
<div id="viewport"></div>
<div class="header">
  <div class="lang gmnoprint">
    {% comment %}
    #i18n: Label for a language selector
    {% endcomment %}
    {% trans "Language:" %} 
    <select id="lang-select">
    {% for lang in params.languages %}
      <option value="{{params.url_no_lang}}&amp;lang={{lang.0}}"
        {% ifequal lang.0 params.lang %} selected{% endifequal %}>{{lang.1}}</option>
    {% endfor %}
    </select>
  </div>
  <div class="user">
    <strong>{{authorization}}</strong> <span class="sep">|</span>
    {% if params.print or settings %}
      {% comment %}
      #i18n: Link to return to the main page of the application
      {% endcomment %}
      <a href="{{home_url}}">{% trans "Home" %}</a> <span class="sep">|</span>
    {% else %}
      <a id="print-link" href="#"
         {% comment %}
         #i18n: Link to print the current view of the application
         {% endcomment %}
         class="print-link-disabled">{% trans "Print" %}</a> <span class="sep">|</span>
    {% endif %}
    {% if not settings %}
      {% comment %}
      #i18n: Link to go to the settings page of the application
      {% endcomment %}
      <a href="{{settings_url}}">{% trans "Settings" %}</a> <span
        class="sep">|</span>
    {% endif %}
    {% comment %}
    #i18n: Link to go to a help page for the application
    {% endcomment %}
    <a target="_blank" href="/help" id="help-link">{% trans "Help" %}</a>
    <span class="sep">|</span>
    {% comment %}
    #i18n: Link to terms of service for the application
    {% endcomment %}
    <a target="_blank" href="/terms">{% trans "Terms of Service" %}</a>
    <span class="sep">|</span>
    {% comment %}
    #i18n: Link to privacy policy for the application
    {% endcomment %}
    <a target="_blank" href="/privacy">{% trans "Privacy" %}</a>
    <span class="sep">|</span>
    <a href="{{loginout_url}}">{{loginout_text}}</a>
  </div>
  {% if params.print %}
    <div class="print-header">
      <table width="100%" cellspacing=0 cellpadding=0 border=0>
        <tbody>
          <tr>
            <td valign=top>
              {% comment %}
              #i18n: Name of the application.
              {% endcomment %}
              <span class="print-title">{% trans "Resource Finder" %}</span><br/>
              <span class="print-subtitle" id="header-print-subtitle"></span>
            </td>
            <td valign=top class="print-datetime">
              <span class="print-date" id="header-print-date"></span><br/>
              <span class="print-time" id="header-print-time"></span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  {% else %}
  <div class="title">
    {% comment %}
    #i18n: Name of the application.
    {% endcomment %}
    <a href="{{home_url}}">{% trans "Resource Finder" %}</a>
  </div>
  {% endif %}
  {% if not settings %}
    {% comment %}
    #i18n: Indicator that the application is loading.
    {% endcomment %}
    <div id="loading" class="loading">{% trans "Loading..." %}</div>
  {% endif %}
</div>
